(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{18:function(n,e,t){n.exports=t(27)},24:function(n,e,t){},27:function(n,e,t){"use strict";t.r(e);var a,r,i,o,c,l,s,u,p,m,g=t(0),d=t.n(g),h=t(8),x=t.n(h),w=t(1),y=t(4),f=t.n(y),b=t(9),v=t(10),j=t(11),E=t(17),O=t(16),k=(t(24),t(2)),P=t(12),S=new(t.n(P).a),I=function(n){Object(E.a)(t,n);var e=Object(O.a)(t);function t(){var n;Object(v.a)(this,t);var a=((n=e.call(this)).getHashParams()||null).access_token;return a?(window.history.replaceState({},document.title,"/"),S.setAccessToken(a),n.state={loggedIn:!0,nowPlaying:{name:"",artists:[],albumArt:""},lyrics:""},n.timer=setInterval((function(){return n.getNowPlaying()}),1e3)):n.state={loggedIn:!1,nowPlaying:{name:"",artists:[],albumArt:""},lyrics:""},n}return Object(j.a)(t,[{key:"getHashParams",value:function(){var n,e={},t=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);for(n=t.exec(a);n;)e[n[1]]=decodeURIComponent(n[2]),n=t.exec(a);return e}},{key:"getNowPlaying",value:function(){var n=this,e=this.state,t=e.loggedIn,a=e.nowPlaying;t&&S.getMyCurrentPlaybackState().then((function(e){e?e.item.name!==a.name&&(n.setState({nowPlaying:{name:e.item.name,artists:e.item.artists.map((function(n){return n.name})),albumArt:e.item.album.images[0].url},lyrics:"Loading..."}),n.getLyrics()):n.setState({lyrics:"Nothing is playing right now...\nStart playing something on your Spotify account. ",nowPlaying:{name:"",artists:[],albumArt:""}})}),(function(e){n.setState({loggedIn:!1})}))}},{key:"getLyrics",value:function(){var n=Object(b.a)(f.a.mark((function n(){var e,t=this;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=this.state.nowPlaying,n.next=3,fetch("/lyrics?song="+encodeURI(e.name)+"&artist="+encodeURI(e.artists[0])).then((function(n){return n.text()})).then((function(n){return(new window.DOMParser).parseFromString(n,"text/html")})).then((function(n){var e=n.querySelectorAll('div[class^="Lyrics__Container"]'),a="";e.forEach((function(n){a+=n.innerHTML.replace(/<br>/g,"\n").replace(/<(?!\s*br\s*\/?)[^>]+>/gi,"").replaceAll("amp;","")+"\n"})),a?t.setState({lyrics:a}):t.setState({lyrics:"[Lyrics Not Found]"})}));case 3:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"render",value:function(){var n=this.state,e=n.loggedIn,t=n.nowPlaying,a=n.lyrics,r=t.name,i=t.artists,o=t.albumArt;if(e)return d.a.createElement(M,null,d.a.createElement(C,null,d.a.createElement(R,null,r&&i&&o&&d.a.createElement(d.a.Fragment,null,d.a.createElement(U,null,r),d.a.createElement(L,null,i.join(", ")),d.a.createElement(A,{src:o,alt:""}))),d.a.createElement(H,null,a.split(/\r?\n/).map((function(n,e){return""===n?d.a.createElement("br",{key:e}):d.a.createElement(F,{key:e},n)})))),d.a.createElement(N,null,d.a.createElement(z,{href:"https://evanwilcox.com"},"Evan Wilcox")));window.location.href="/login"}}]),t}(g.Component),A=k.a.img(a||(a=Object(w.a)(["\n  height: 400px;\n  width: 400px;\n  margin: 25px 0px 50px 0px;\n"]))),L=k.a.p(r||(r=Object(w.a)(["\n  font-size: 30px;\n  margin: 0px;\n"]))),C=k.a.div(i||(i=Object(w.a)(['\n  width: "100%";\n  display: flex;\n  flex-direction: row-reverse;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  padding-bottom: 100px;\n']))),N=k.a.div(o||(o=Object(w.a)(["\n  width: calc(100% - 100px);\n  margin: 0px auto;\n  position: absolute;\n  bottom: 0;\n  text-align: center;\n  padding-bottom: 30px;\n"]))),z=k.a.a(c||(c=Object(w.a)(["\n  text-decoration: none;\n  color: black;\n\n  &::visited {\n    color: black;\n  }\n  &::hover {\n    color: gray;\n  }\n"]))),F=k.a.p(l||(l=Object(w.a)(["\n  font-size: 25px;\n  margin: 0px;\n"]))),H=k.a.div(s||(s=Object(w.a)(["\n  min-width: 500px;\n  max-width: 700px;\n"]))),M=k.a.div(u||(u=Object(w.a)(["\n  min-height: calc(100vh - 100px);\n  max-width: 100%;\n  position: relative;\n  padding: 50px 50px 0px 50px;\n  overflow-x: hidden;\n"]))),R=k.a.div(p||(p=Object(w.a)(["\n  min-width: 400px;\n  max-width: 600px;\n"]))),U=k.a.p(m||(m=Object(w.a)(["\n  font-size: 50px;\n  overflow-wrap: break-word;\n  margin: 0px;\n"])));x.a.render(d.a.createElement(I,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.d230e223.chunk.js.map